<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formalize - Abertura de CNPJ</title>
  <link rel="stylesheet" href="styles/cnpj_manager.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="icon" type="image/png" href="assets/logoFormalize.png">
</head>
<body>
  <header>
    <div class="header-container">
      <div class="logo-container">
        <img src="assets/LogoFormalizeWh.png" alt="Logo Formalize">
        <h1>Processo de Abertura CNPJ</h1>
      </div>
      <button class="menu-button" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <div class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <img src="assets/logoFormalize.png" alt="Logo" class="sidebar-logo">
        <button class="close-button" onclick="toggleSidebar()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <ul>
        <li><a href="#"><i class="fas fa-user"></i> Perfil</a></li>
        <li><a href="#" id="logout-button"><i class="fas fa-sign-out-alt"></i> Sair</a></li>
      </ul>
    </div>
    <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>
  </header>

  <main>
    <div class="form-container">
      <div class="form-header">
        <h2>Formulário de Cadastro</h2>
        <p>Preencha os dados abaixo para iniciar o processo de abertura do seu CNPJ</p>
      </div>
      
      <form action="#" method="post" id="cnpj-form">
        <!-- Progress bar -->
        <div class="progress-container">
          <div class="progress-bar">
            <div class="progress" id="form-progress"></div>
          </div>
          <div class="progress-steps">
            <div class="step active" data-step="1">1</div>
            <div class="step" data-step="2">2</div>
            <div class="step" data-step="3">3</div>
            <div class="step" data-step="4">4</div>
          </div>
        </div>

        <!-- Error message container -->
        <div class="error-container" id="error-container"></div>

        <!-- Informações Gerais -->
        <fieldset class="form-step active" id="step-1">
          <legend><i class="fas fa-info-circle"></i> Informações Gerais</legend>
          
          <div class="form-row">
            <div class="form-group">
              <label for="municipioInteresse">Município de interesse *</label>
              <input type="text" id="municipioInteresse" name="municipioInteresse" placeholder="Ex: São Paulo" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group checkbox-container">
              <div class="checkbox-group">
                <input type="checkbox" id="eMatriz" name="eMatriz">
                <label for="eMatriz">É matriz?</label>
              </div>
              
              <div class="checkbox-group">
                <input type="checkbox" id="eFilial" name="eFilial">
                <label for="eFilial">É filial?</label>
              </div>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="inscricaoImobiliaria">Inscrição imobiliária *</label>
              <input type="text" id="inscricaoImobiliaria" name="inscricaoImobiliaria" placeholder="Número da inscrição" required>
            </div>
            
            <div class="form-group">
              <label for="areaEstabelecimento">Área do estabelecimento (m²) *</label>
              <input type="text" id="areaEstabelecimento" name="areaEstabelecimento" placeholder="Ex: 100" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group checkbox-container">
              <div class="checkbox-group">
                <input type="checkbox" id="solicitaInscricaoEstadual" name="solicitaInscricaoEstadual">
                <label for="solicitaInscricaoEstadual">Solicita Inscrição Estadual?</label>
              </div>
            </div>
          </div>
          
          <div class="form-navigation">
            <button type="button" class="next-btn" onclick="validateAndNext(1)">Próximo <i class="fas fa-arrow-right"></i></button>
          </div>
        </fieldset>

        <!-- Dados Jurídicos -->
        <fieldset class="form-step" id="step-2">
          <legend><i class="fas fa-balance-scale"></i> Dados Jurídicos</legend>
          
          <div class="form-row">
            <div class="form-group">
              <label for="tipoJuridico">Tipo jurídico *</label>
              <select id="tipoJuridico" name="tipoJuridico" required>
                <option value="">Selecione</option>
                <option value="empresario">Empresário</option>
                <option value="sociedadeEmpresaria">Sociedade Empresária</option>
                <option value="mei">MEI</option>
                <option value="sociedadeAnonima">Sociedade Anônima</option>
                <option value="cooperativa">Cooperativa</option>
                <option value="consorcio">Consórcio</option>
                <option value="sociedade">Sociedade</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="naturezaJuridica">Natureza jurídica *</label>
              <select id="naturezaJuridica" name="naturezaJuridica" required>
                <option value="">Selecione</option>
                <option value="sociedadeEmpresariaLtda">Sociedade empresária Ltda</option>
                <option value="nomeColetivo">Sociedade Empresária em nome coletivo</option>
                <option value="comanditaSimples">Sociedade Empresária em Comandita Simples</option>
                <option value="comanditaAcoes">Sociedade Empresária em Comandita por Ações</option>
                <option value="grupoSociedades">Grupo de Sociedades</option>
                <option value="sociedadeEstrangeira">Estabelecimento, no Brasil, de Sociedade Estrangeira</option>
                <option value="empresaBinacional">Estabelecimento, no Brasil, de empresa Binacional Argentino-Brasileira</option>
                <option value="sociedadeEmpresariaLtda2">Sociedade empresária Ltda</option>
              </select>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="tipoUnidade">Tipo de unidade *</label>
              <select id="tipoUnidade" name="tipoUnidade" required>
                <option value="">Selecione</option>
                <option value="unidadeProdutiva">Unidade Produtiva</option>
                <option value="sede">Sede</option>
                <option value="escritorioAdministrativo">Escritório Administrativo</option>
                <option value="depositoFechado">Depósito Fechado</option>
                <option value="almoxarifado">Almoxarifado</option>
                <option value="oficinaReparacao">Oficina de Reparação</option>
                <option value="garagem">Garagem</option>
                <option value="unidadeAbastecimento">Unidade de abastecimento de combustíveis</option>
                <option value="pontoExposicao">Ponto de exposição</option>
                <option value="centroTreinamento">Centro de treinamento</option>
                <option value="centroProcessamento">Centro de Processamento de Dados</option>
                <option value="postoColeta">Posto de Coleta</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="formaAtuacao">Forma de atuação *</label>
              <select id="formaAtuacao" name="formaAtuacao" required>
                <option value="">Selecione</option>
                <option value="estabelecimentoFixo">Estabelecimento Fixo</option>
                <option value="internet">Internet</option>
                <option value="localFixoForaDeLoja">Em Local Fixo Fora de Loja</option>
                <option value="correio">Correio</option>
                <option value="portaAPorta">Porta a Porta, Postos Móveis ou por Ambulantes</option>
                <option value="televendas">Televendas</option>
                <option value="maquinasAutomaticas">Máquinas Automáticas</option>
                <option value="atividadeForaEstabelecimento">Atividade Desenvolvida Fora do Estabelecimento</option>
              </select>
            </div>
          </div>
          
          <div class="form-navigation">
            <button type="button" class="prev-btn" onclick="prevStep(2)"><i class="fas fa-arrow-left"></i> Anterior</button>
            <button type="button" class="next-btn" onclick="validateAndNext(2)">Próximo <i class="fas fa-arrow-right"></i></button>
          </div>
        </fieldset>

        <!-- Endereço -->
        <fieldset class="form-step" id="step-3">
          <legend><i class="fas fa-map-marker-alt"></i> Endereço</legend>
          
          <div class="form-row">
            <div class="form-group">
              <label for="cep">CEP *</label>
              <input type="text" id="cep" name="cep" placeholder="00000-000" required>
            </div>
            
            <div class="form-group">
              <label for="uf">UF *</label>
              <input type="text" id="uf" name="uf" placeholder="Ex: SP" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="municipio">Município *</label>
              <input type="text" id="municipio" name="municipio" placeholder="Ex: São Paulo" required>
            </div>
            
            <div class="form-group">
              <label for="bairro">Bairro *</label>
              <input type="text" id="bairro" name="bairro" placeholder="Ex: Centro" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="tipoLogradouro">Tipo logradouro *</label>
              <input type="text" id="tipoLogradouro" name="tipoLogradouro" placeholder="Ex: Rua, Avenida" required>
            </div>
            
            <div class="form-group">
              <label for="logradouro">Logradouro *</label>
              <input type="text" id="logradouro" name="logradouro" placeholder="Nome da rua" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="numero">Número *</label>
              <input type="text" id="numero" name="numero" placeholder="Ex: 123" required>
            </div>
            
            <div class="form-group">
              <label for="complemento">Complemento</label>
              <input type="text" id="complemento" name="complemento" placeholder="Ex: Sala 101">
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="pontoReferencia">Ponto de referência</label>
              <input type="text" id="pontoReferencia" name="pontoReferencia" placeholder="Ex: Próximo ao shopping">
            </div>
          </div>
          
          <div class="form-navigation">
            <button type="button" class="prev-btn" onclick="prevStep(3)"><i class="fas fa-arrow-left"></i> Anterior</button>
            <button type="button" class="next-btn" onclick="validateAndNext(3)">Próximo <i class="fas fa-arrow-right"></i></button>
          </div>
        </fieldset>

        <!-- Informações Empresariais -->
        <fieldset class="form-step" id="step-4">
          <legend><i class="fas fa-building"></i> Informações Empresariais</legend>
          
          <div class="form-row">
            <div class="form-group">
              <label for="nomeEmpresarial">Nome empresarial *</label>
              <input type="text" id="nomeEmpresarial" name="nomeEmpresarial" placeholder="Nome da empresa" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group checkbox-container">
              <div class="checkbox-group">
                <input type="checkbox" id="usarCnpjNome" name="usarCnpjNome">
                <label for="usarCnpjNome">Usar CNPJ no nome</label>
              </div>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="objetoSocial">Objeto social *</label>
              <textarea id="objetoSocial" name="objetoSocial" placeholder="Descreva o objeto social da empresa" required></textarea>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="cnaePrincipal">CNAE principal *</label>
              <input type="text" id="cnaePrincipal" name="cnaePrincipal" placeholder="Ex: 6201-5/01" required>
            </div>
            
            <div class="form-group">
              <label for="cnaesSecundarios">CNAEs secundários</label>
              <input type="text" id="cnaesSecundarios" name="cnaesSecundarios" placeholder="Ex: 6202-3/00, 6203-1/00">
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="enquadramento">Enquadramento *</label>
              <select id="enquadramento" name="enquadramento" required>
                <option value="">Selecione</option>
                <option value="epp">EPP - Empresa de Pequeno Porte</option>
                <option value="me">ME - Micro-empresa</option>
                <option value="normal">Normal ou outros enquadramentos</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="areaConstruida">Área construída (m²) *</label>
              <input type="text" id="areaConstruida" name="areaConstruida" placeholder="Ex: 100" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group checkbox-container">
              <div class="checkbox-group">
                <input type="checkbox" id="possuiHabiteSe" name="possuiHabiteSe">
                <label for="possuiHabiteSe">Possui Habite-se?</label>
              </div>
              
              <div class="checkbox-group">
                <input type="checkbox" id="optanteSimplesNacional" name="optanteSimplesNacional">
                <label for="optanteSimplesNacional">Optante pelo Simples Nacional?</label>
              </div>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="telefoneContato">Telefone de contato *</label>
              <input type="text" id="telefoneContato" name="telefoneContato" placeholder="(00) 00000-0000" required>
            </div>
            
            <div class="form-group">
              <label for="nomeContador">Nome do contador *</label>
              <input type="text" id="nomeContador" name="nomeContador" placeholder="Nome completo" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="registroBombeiros">Registro bombeiros</label>
              <input type="text" id="registroBombeiros" name="registroBombeiros" placeholder="Número do registro">
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="capitalSocial">Capital social (R$) *</label>
              <input type="text" id="capitalSocial" name="capitalSocial" placeholder="Ex: 10000,00" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="qtdQuotas">Quantidade de quotas *</label>
              <input type="number" id="qtdQuotas" name="qtdQuotas" placeholder="Ex: 10000" required>
            </div>
            
            <div class="form-group">
              <label for="valorQuota">Valor da quota (R$) *</label>
              <input type="number" id="valorQuota" name="valorQuota" placeholder="Ex: 1,00" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="tipoCapital">Tipo de capital *</label>
              <select id="tipoCapital" name="tipoCapital" required>
                <option value="">Selecione</option>
                <option value="especies">ESPÉCIES</option>
                <option value="imoveis">IMÓVEIS</option>
                <option value="outros">OUTROS</option>
              </select>
            </div>
          </div>
          
          <div class="form-navigation">
            <button type="button" class="prev-btn" onclick="prevStep(4)"><i class="fas fa-arrow-left"></i> Anterior</button>
            <button type="button" class="submit-btn" onclick="validateAndSubmit()">Enviar <i class="fas fa-paper-plane"></i></button>
          </div>
        </fieldset>
      </form>
    </div>
  </main>

  <footer>
    <div class="footer-content">
      <div class="footer-logo">
        <img src="assets/logoFormalize.png" alt="Logo Formalize" class="footer-img">
        <h3>Formalize.CA</h3>
      </div>
      <div class="footer-info">
        <p>&copy; 2025 Formalize.CA - Todos os direitos reservados.</p>
        <div class="footer-links">
          <a href="#">Termos de Uso</a>
          <a href="#">Política de Privacidade</a>
          <a href="#">Contato</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Toggle sidebar
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('overlay');
      
      sidebar.classList.toggle('open');
      overlay.classList.toggle('active');
    }
    
    // Form validation and navigation
    function validateAndNext(currentStep) {
      // Clear previous error messages
      clearErrors();
      
      // Get all required fields in the current step
      const currentFieldset = document.getElementById(`step-${currentStep}`);
      const requiredFields = currentFieldset.querySelectorAll('[required]');
      
      // Check if all required fields are filled
      let isValid = true;
      let errorMessages = [];
      
      requiredFields.forEach(field => {
        if (!field.value.trim()) {
          isValid = false;
          field.classList.add('invalid');
          
          // Get the field label text
          const labelText = field.previousElementSibling.textContent.replace('*', '').trim();
          errorMessages.push(`O campo "${labelText}" é obrigatório.`);
        } else {
          field.classList.remove('invalid');
        }
      });
      
      // Special validation for checkboxes if needed
      if (currentStep === 1) {
        const eMatriz = document.getElementById('eMatriz');
        const eFilial = document.getElementById('eFilial');
        
        if (!eMatriz.checked && !eFilial.checked) {
          isValid = false;
          eMatriz.parentElement.classList.add('invalid-checkbox');
          eFilial.parentElement.classList.add('invalid-checkbox');
          errorMessages.push('Selecione se é matriz ou filial.');
        } else {
          eMatriz.parentElement.classList.remove('invalid-checkbox');
          eFilial.parentElement.classList.remove('invalid-checkbox');
        }
      }
      
      // If validation fails, show error messages
      if (!isValid) {
        showErrors(errorMessages);
        return;
      }
      
      // If validation passes, go to next step
      nextStep(currentStep);
    }
    
    function nextStep(currentStep) {
      document.getElementById(`step-${currentStep}`).classList.remove('active');
      document.getElementById(`step-${currentStep + 1}`).classList.add('active');
      
      // Update progress bar
      updateProgress(currentStep + 1);
      
      // Scroll to top
      window.scrollTo(0, 0);
    }
    
    function prevStep(currentStep) {
      // Clear any error messages when going back
      clearErrors();
      
      document.getElementById(`step-${currentStep}`).classList.remove('active');
      document.getElementById(`step-${currentStep - 1}`).classList.add('active');
      
      // Update progress bar
      updateProgress(currentStep - 1);
      
      // Scroll to top
      window.scrollTo(0, 0);
    }
    
    function updateProgress(step) {
      // Update progress bar
      const progressBar = document.getElementById('form-progress');
      const progressPercentage = (step - 1) * 33.33;
      progressBar.style.width = `${progressPercentage}%`;
      
      // Update step indicators
      const steps = document.querySelectorAll('.step');
      steps.forEach(stepEl => {
        const stepNum = parseInt(stepEl.getAttribute('data-step'));
        if (stepNum <= step) {
          stepEl.classList.add('active');
        } else {
          stepEl.classList.remove('active');
        }
      });
    }
    
    // Show error messages
    function showErrors(messages) {
      const errorContainer = document.getElementById('error-container');
      errorContainer.innerHTML = '';
      errorContainer.classList.add('active');
      
      const errorList = document.createElement('ul');
      
      messages.forEach(message => {
        const errorItem = document.createElement('li');
        errorItem.textContent = message;
        errorList.appendChild(errorItem);
      });
      
      errorContainer.appendChild(errorList);
      
      // Scroll to error container
      errorContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
    
    // Clear error messages
    function clearErrors() {
      const errorContainer = document.getElementById('error-container');
      errorContainer.innerHTML = '';
      errorContainer.classList.remove('active');
      
      // Remove invalid class from all fields
      const invalidFields = document.querySelectorAll('.invalid');
      invalidFields.forEach(field => {
        field.classList.remove('invalid');
      });
      
      const invalidCheckboxes = document.querySelectorAll('.invalid-checkbox');
      invalidCheckboxes.forEach(checkbox => {
        checkbox.classList.remove('invalid-checkbox');
      });
    }
    
    // Validate and submit form
    function validateAndSubmit() {
      // Clear previous error messages
      clearErrors();
      
      // Get all required fields in the last step
      const lastFieldset = document.getElementById('step-4');
      const requiredFields = lastFieldset.querySelectorAll('[required]');
      
      // Check if all required fields are filled
      let isValid = true;
      let errorMessages = [];
      
      requiredFields.forEach(field => {
        if (!field.value.trim()) {
          isValid = false;
          field.classList.add('invalid');
          
          // Get the field label text
          const labelText = field.previousElementSibling.textContent.replace('*', '').trim();
          errorMessages.push(`O campo "${labelText}" é obrigatório.`);
        } else {
          field.classList.remove('invalid');
        }
      });
      
      // If validation fails, show error messages
      if (!isValid) {
        showErrors(errorMessages);
        return;
      }
      
      // If validation passes, submit the form
      document.getElementById('cnpj-form').submit();
    }
  </script>
</body>
</html>